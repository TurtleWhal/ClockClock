#ifndef FONT_H
#define FONT_H

#include "Arduino.h"

// #define CHAR_TO_FONT(c) (c > '0' && c <= '9' ? c - '0' : c - 'A' + 10)
#define CHAR_MAP "0123456789 abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"

const uint16_t missing_character[3][2][2] = {
    {{0, 0}, {180, 180}},
    {{0, 0}, {180, 180}},
    {{0, 0}, {180, 180}}};

const uint16_t font[][3][2][2] = {
    // '0'
    {
        {{0, 90}, {180, 90}},
        {{270, 90}, {270, 90}},
        {{0, 270}, {180, 270}}},

    // '1'
    {
        {{135, 135}, {90, 90}},
        {{135, 135}, {270, 90}},
        {{135, 135}, {270, 270}}},

    // '2'
    {
        {{0, 0}, {180, 90}},
        {{0, 90}, {180, 270}},
        {{0, 270}, {180, 180}}},

    // '3'
    {
        {{0, 0}, {180, 90}},
        {{0, 0}, {270, 180}},
        {{0, 0}, {180, 270}}},

    // '4'
    {
        {{90, 90}, {90, 90}},
        {{0, 270}, {270, 90}},
        {{135, 135}, {270, 270}}},

    // '5'
    {
        {{0, 90}, {180, 180}},
        {{0, 270}, {180, 90}},
        {{0, 0}, {180, 270}}},

    // '6'
    {
        {{0, 90}, {180, 180}},
        {{90, 270}, {180, 90}},
        {{0, 270}, {180, 270}}},

    // '7'
    {
        {{0, 0}, {180, 90}},
        {{135, 135}, {90, 270}},
        {{135, 135}, {270, 270}}},

    // '8'
    {
        {{0, 90}, {180, 90}},
        {{0, 270}, {180, 270}},
        {{270, 0}, {270, 180}}},

    // '9'
    {
        {{0, 90}, {180, 90}},
        {{0, 270}, {180, 90}},
        {{135, 135}, {270, 270}}},

    // ' '
    {
        {{135, 135}, {135, 135}},
        {{135, 135}, {135, 135}},
        {{135, 135}, {135, 135}}},

    // 'a'
    {
        {{135, 135}, {135, 135}},
        {{340, 110}, {200, 90}},
        {{250, 350}, {270, 270}}},

    // 'b'
    {
        {{90, 90}, {135, 135}},
        {{340, 270}, {200, 70}},
        {{270, 20}, {160, 290}}},

    // 'c'
    {
        {{135, 135}, {135, 135}},
        {{110, 340}, {200, 200}},
        {{20, 250}, {160, 160}}},

    // 'd'
    {
        {{135, 135}, {90, 90}},
        {{340, 110}, {200, 270}},
        {{250, 20}, {160, 270}}},

    // 'e'
    // {
    //     {{90, 340}, {200, 90}},
    //     {{90, 270}, {180, 270}},
    //     {{270, 20}, {170, 170}}},
    {
        {{135, 135}, {135, 135}},
        {{110, 340}, {140, 200}},
        {{20, 250}, {160, 160}}},

    // 'f'
    {
        {{90, 340}, {200, 200}},
        {{90, 180}, {180, 180}},
        {{270, 270}, {135, 135}}},

    // 'g'
    {
        {{110, 340}, {200, 90}},
        {{20, 250}, {160, 90}},
        {{20, 20}, {170, 270}}},

    // 'h'
    {
        {{90, 90}, {135, 135}},
        {{270, 340}, {90, 200}},
        {{270, 270}, {270, 270}}},

    // 'i'
    {
        {{135, 135}, {90, 90}},
        {{135, 135}, {90, 90}},
        {{135, 135}, {270, 270}}},

    // 'j'
    {
        {{135, 135}, {90, 90}},
        {{135, 135}, {90, 90}},
        {{270, 20}, {160, 270}}},

    // 'k'
    {
        {{90, 90}, {135, 135}},
        {{270, 90}, {140, 130}},
        {{270, 270}, {220, 230}}},

    // 'l'
    {
        {{90, 90}, {135, 135}},
        {{90, 270}, {135, 135}},
        {{270, 0}, {135, 135}}},

    // 'm'
    {
        {{135, 135}, {135, 135}},
        {{90, 45}, {90, 135}},
        {{270, 270}, {270, 270}}},

    // 'n'
    {
        {{135, 135}, {135, 135}},
        {{340, 90}, {200, 90}},
        {{270, 270}, {270, 270}}},

    // 'o'
    {
        {{135, 135}, {135, 135}},
        {{110, 340}, {200, 70}},
        {{20, 250}, {160, 290}}},

    // 'p'
    {
        {{90, 340}, {200, 70}},
        {{20, 90}, {160, 290}},
        {{270, 270}, {135, 135}}},

    // 'q'
    {
        {{110, 340}, {200, 90}},
        {{20, 250}, {160, 90}},
        {{135, 135}, {270, 270}}},

    // 'r'
    {
        {{135, 135}, {135, 135}},
        {{90, 340}, {200, 200}},
        {{270, 270}, {135, 135}}},

    // 's'
    {
        {{135, 135}, {135, 135}},
        {{45, 340}, {200, 200}},
        {{20, 20}, {225, 160}}},

    // 't'
    {
        {{135, 135}, {135, 135}},
        {{270, 180}, {180, 180}},
        {{270, 20}, {160, 160}}},

    // 'u'
    {
        {{135, 135}, {135, 135}},
        {{90, 90}, {90, 90}},
        {{270, 10}, {170, 270}}},

    // 'v'
    {
        {{135, 135}, {135, 135}},
        {{90, 90}, {90, 90}},
        {{270, 45}, {135, 270}}},

    // 'w'
    {
        {{135, 135}, {135, 135}},
        {{90, 90}, {90, 90}},
        {{270, 315}, {270, 225}}},

    // 'x'
    {
        {{135, 135}, {135, 135}},
        {{45, 45}, {135, 135}},
        {{315, 315}, {225, 225}}},

    // 'y'
    {
        {{135, 135}, {135, 135}},
        {{45, 45}, {135, 135}},
        {{315, 315}, {135, 135}}},

    // 'z'
    {
        {{135, 135}, {135, 135}},
        {{0, 0}, {180, 135}},
        {{315, 0}, {180, 180}}},

    // 'A'
    {
        {{0, 90}, {180, 90}},
        {{0, 90}, {180, 90}},
        {{270, 270}, {270, 270}}},

    // 'B'
    {
        {{0, 90}, {180, 70}},
        {{0, 270}, {70, 290}},
        {{270, 0}, {290, 180}}},

    // 'C'
    {
        {{0, 90}, {180, 180}},
        {{270, 90}, {135, 135}},
        {{270, 0}, {180, 180}}},

    // 'D'
    {
        {{0, 90}, {180, 70}},
        {{90, 270}, {90, 270}},
        {{270, 0}, {290, 180}}},

    // 'E'
    {
        {{0, 90}, {180, 180}},
        {{0, 90}, {180, 180}},
        {{270, 0}, {180, 180}}},

    // 'F'
    {
        {{0, 90}, {180, 180}},
        {{90, 0}, {180, 180}},
        {{270, 270}, {135, 135}}},

    // 'G'
    {
        {{340, 90}, {200, 200}},
        {{270, 90}, {90, 180}},
        {{270, 20}, {160, 270}}},

    // 'H'
    {
        {{90, 90}, {90, 90}},
        {{270, 0}, {270, 180}},
        {{270, 270}, {270, 270}}},

    // 'I'
    {
        {{135, 135}, {90, 90}},
        {{135, 135}, {270, 90}},
        {{135, 135}, {270, 270}}},

    // 'J'
    {
        {{0, 0}, {180, 90}},
        {{135, 135}, {270, 90}},
        {{270, 20}, {160, 270}}},

    // 'K'
    {
        {{90, 90}, {90, 90}},
        {{270, 90}, {135, 270}},
        {{270, 270}, {225, 225}}},

    // 'L'
    {
        {{90, 90}, {135, 135}},
        {{270, 90}, {135, 135}},
        {{270, 0}, {180, 180}}},

    // 'M'
    {
        {{90, 45}, {90, 135}},
        {{270, 90}, {270, 90}},
        {{270, 270}, {270, 270}}},

    // 'N'
    {
        {{90, 45}, {90, 90}},
        {{270, 90}, {270, 225}},
        {{270, 270}, {270, 270}}},

    // 'O'
    {
        {{0, 90}, {180, 90}},
        {{270, 90}, {270, 90}},
        {{0, 270}, {180, 270}}},

    // 'P'
    {
        {{0, 90}, {180, 70}},
        {{90, 0}, {290, 180}},
        {{270, 270}, {135, 135}}},

    // 'Q'
    {
        {{340, 90}, {200, 90}},
        {{270, 90}, {270, 90}},
        {{20, 270}, {160, 225}}},

    // 'R'
    {
        {{0, 90}, {180, 70}},
        {{90, 0}, {290, 180}},
        {{270, 270}, {225, 225}}},

    // 'S'
    {
        {{340, 110}, {200, 200}},
        {{250, 0}, {70, 180}},
        {{20, 20}, {160, 290}}},

    // 'T'
    {
        {{180, 90}, {180, 180}},
        {{270, 90}, {135, 135}},
        {{270, 270}, {135, 135}}},

    // 'U'
    {
        {{90, 90}, {90, 90}},
        {{270, 90}, {270, 90}},
        {{270, 0}, {180, 270}}},

    // 'V'
    {
        {{90, 90}, {90, 90}},
        {{270, 90}, {270, 90}},
        {{270, 45}, {135, 270}}},

    // 'W'
    {
        {{90, 90}, {90, 90}},
        {{270, 90}, {270, 90}},
        {{270, 315}, {270, 225}}},

    // 'X'
    {
        {{90, 90}, {90, 90}},
        {{270, 45}, {270, 135}},
        {{315, 315}, {225, 225}}},

    // 'Y'
    {
        {{45, 45}, {90, 90}},
        {{135, 135}, {270, 90}},
        {{135, 135}, {270, 270}}},

    // 'Z'
    {
        {{0, 0}, {180, 90}},
        {{135, 135}, {270, 135}},
        {{315, 0}, {180, 180}}},
};

const uint16_t (*getCharacter(char c))[3][2][2]
{
    const char *ptr = strchr(CHAR_MAP, c);
    if (ptr)
    {
        int index = ptr - CHAR_MAP;
        return &font[index];
    }
    else
    {
        return &missing_character;
    }
}

#endif
